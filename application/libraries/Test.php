<?php
//0.002053
//0.001009
require __DIR__ . '/Collection.php';

$result = json_decode('[{"stop_time_cycle":"0.08919598020837834","hour":"00:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.0833333338394869","hour":"00:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.07127429945615661","hour":"01:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.05817174607077794","hour":"01:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.05637982261065913","hour":"02:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.08846153996598262","hour":"02:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.02793296201768534","hour":"03:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.026666667759418488","hour":"03:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.04761904878985314","hour":"04:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.0348360655699536","hour":"04:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.017137097034250356","hour":"05:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.028969957333361898","hour":"05:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.18908629627888882","hour":"06:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.17804722427542072","hour":"06:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.1696721335720332","hour":"07:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.21809256695430376","hour":"07:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.2490297528164507","hour":"08:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.2521631671633797","hour":"08:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.22582448339282366","hour":"09:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.2076624112244052","hour":"09:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.2494493440646957","hour":"10:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.23335054382935713","hour":"10:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.31148491773901293","hour":"11:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.22815838994693635","hour":"11:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.24812030032096122","hour":"12:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.221228384756587","hour":"12:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.20329322354505905","hour":"13:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.24938423589349087","hour":"13:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.23218527383164386","hour":"14:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.2602163440673254","hour":"14:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.26061320950646166","hour":"15:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.24822275171947988","hour":"15:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.24429967561645693","hour":"16:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.22582826381039184","hour":"16:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.27110390040975113","hour":"17:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.2689844512219617","hour":"17:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.33002973144838904","hour":"18:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.3975799479356797","hour":"18:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.2166553814299581","hour":"19:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.19247787507322334","hour":"19:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.19951534827927395","hour":"20:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.21242124350568822","hour":"20:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.1805825257330265","hour":"21:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.197916667512618","hour":"21:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.37221095301437573","hour":"22:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.27710843632319365","hour":"22:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.2732558138668537","hour":"23:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.2439824972032718","hour":"23:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_603227950"},{"stop_time_cycle":"0.07692307978868484","hour":"07:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.6250000136593977","hour":"08:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.2783505196116634","hour":"08:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.11764706159923591","hour":"09:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.16666667088866233","hour":"09:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.1505376387748026","hour":"10:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.16483516978857282","hour":"10:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.07142857302512441","hour":"11:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.186046518212141","hour":"11:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.045454546470533715","hour":"12:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.1666666716337204","hour":"12:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.202702704112272","hour":"13:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.1304347864959551","hour":"13:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.08955224125242944","hour":"14:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.23333333995607164","hour":"14:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.0833333358168602","hour":"15:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.17307691978147396","hour":"15:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.07692307978868484","hour":"16:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.20588235666646676","hour":"16:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.13043478260869565","hour":"17:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.23863636566834015","hour":"18:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.39726027846336365","hour":"18:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.07692307978868484","hour":"19:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0","hour":"20:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.10000000149011612","hour":"21:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.05000000074505806","hour":"21:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.10000000149011612","hour":"22:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.30000001192092896","hour":"23:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63349551"},{"stop_time_cycle":"0.5217391420965609","hour":"09:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.6739130480133969","hour":"09:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.800000011920929","hour":"10:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.800000011920929","hour":"10:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.7741935522325577","hour":"11:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.699999988079071","hour":"11:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.6363636255264282","hour":"12:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"1.1333333253860474","hour":"13:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.7575757485447507","hour":"13:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.6190476218859354","hour":"15:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.6216216192052171","hour":"15:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.9166666865348816","hour":"17:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.9090909361839294","hour":"18:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"1.148148192299737","hour":"18:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.8571428514662243","hour":"19:00","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.3636363744735718","hour":"19:30","logic_flow_id":"2017030116_i_505297590_2017030116_o_63461830"},{"stop_time_cycle":"0.8999999761581421","hour":"07:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"1.0909091234207153","hour":"08:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"1","hour":"08:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"0.9230769276618958","hour":"10:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"1.2000000476837158","hour":"10:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"0.9000000059604645","hour":"11:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"1.0625","hour":"11:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"1.100000023841858","hour":"14:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"0.7857142686843872","hour":"15:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"0.8999999761581421","hour":"17:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"1.2000000476837158","hour":"18:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227810"},{"stop_time_cycle":"0.6874999925494194","hour":"08:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.5","hour":"09:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.7272727381099354","hour":"09:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.5476190625202089","hour":"10:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.5757575649203677","hour":"10:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.10000000149011612","hour":"11:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.8181818127632141","hour":"11:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.6097561004685192","hour":"12:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.6363636363636364","hour":"12:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.8999999761581421","hour":"14:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.48484848123608215","hour":"15:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.550000011920929","hour":"15:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.727272705598311","hour":"16:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.5476190575531551","hour":"18:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.7272727489471436","hour":"19:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.5625000186264515","hour":"19:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.6000000238418579","hour":"20:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.3636363744735718","hour":"21:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.6000000238418579","hour":"22:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_603227950"},{"stop_time_cycle":"0.6363636255264282","hour":"09:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_63461830"},{"stop_time_cycle":"0.800000011920929","hour":"11:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_63461830"},{"stop_time_cycle":"0.5833333134651184","hour":"12:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_63461830"},{"stop_time_cycle":"0.8999999761581421","hour":"12:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_63461830"},{"stop_time_cycle":"1.2000000476837158","hour":"15:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_63461830"},{"stop_time_cycle":"1.2666666507720947","hour":"17:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_63461830"},{"stop_time_cycle":"0.9090909361839294","hour":"18:00","logic_flow_id":"2017030116_i_63349550_2017030116_o_63461830"},{"stop_time_cycle":"0.699999988079071","hour":"18:30","logic_flow_id":"2017030116_i_63349550_2017030116_o_63461830"},{"stop_time_cycle":"0.29022988484337414","hour":"00:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.3212237124746206","hour":"00:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.30221130246758754","hour":"01:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.35329341460130886","hour":"01:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.31788079657696733","hour":"02:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.25906736199102254","hour":"02:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.3970588285695104","hour":"03:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.3529411808532827","hour":"03:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.30400000417232514","hour":"04:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.2991453022868545","hour":"04:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.30485762152789625","hour":"05:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.3416927920239846","hour":"05:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.1020733664046967","hour":"06:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.14186248940628854","hour":"06:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.09817813785166031","hour":"07:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.150141642306693","hour":"07:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.16820857978736883","hour":"08:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.1620370356917933","hour":"08:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.16453794248340545","hour":"09:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.1541666680884858","hour":"09:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.18432026814430133","hour":"10:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.13870967787600333","hour":"10:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.14808652217123353","hour":"11:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.16028147016049737","hour":"11:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.15165876944977524","hour":"12:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.11458333344420507","hour":"12:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.1670721833807902","hour":"13:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.15109170252969692","hour":"13:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.12411626128703707","hour":"14:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.13656716580266384","hour":"14:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.14514835720169325","hour":"15:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.14838709813813047","hour":"15:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.1168113666238894","hour":"16:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.15744680804141023","hour":"16:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.18378887970165528","hour":"17:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.1707779896680612","hour":"17:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.16813186926992385","hour":"18:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.12034384075840428","hour":"18:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.14666666652758917","hour":"19:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.1506352089548284","hour":"19:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.1336448612266055","hour":"20:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.13796384702768924","hour":"20:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.13065326802020696","hour":"21:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.11740473886504846","hour":"21:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.12912087884455264","hour":"22:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.12788260040074526","hour":"22:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.08838133013769318","hour":"23:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.07828282963277565","hour":"23:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_603227810"},{"stop_time_cycle":"0.1875000037252903","hour":"05:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.6909090936183929","hour":"06:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.689265545141899","hour":"06:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.8488372162330983","hour":"07:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.738095243771871","hour":"07:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.9384615467144892","hour":"08:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.7500000011462432","hour":"08:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.6562499850988388","hour":"09:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.6363636404275894","hour":"09:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.5","hour":"10:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.9259259303410848","hour":"11:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.9032258026061519","hour":"11:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.8750000037252903","hour":"12:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.8181818127632141","hour":"12:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.7741935637689406","hour":"13:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.6666666630542639","hour":"14:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.5","hour":"14:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.7142857313156128","hour":"15:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.699999988079071","hour":"15:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.9629629651705424","hour":"16:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.9047619104385376","hour":"16:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.8245614076915541","hour":"17:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.9285714030265808","hour":"17:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.9545454653826627","hour":"18:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.8999999761581421","hour":"18:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.699999988079071","hour":"20:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.800000011920929","hour":"21:00","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.800000011920929","hour":"21:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.6249999962747097","hour":"22:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63349551"},{"stop_time_cycle":"0.20000000298023224","hour":"11:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63461830"},{"stop_time_cycle":"0.30000001192092896","hour":"15:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63461830"},{"stop_time_cycle":"0.10000000149011612","hour":"21:30","logic_flow_id":"2017030116_i_63461810_2017030116_o_63461830"},{"stop_time_cycle":"0.37209303053312526","hour":"06:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.3593750046566129","hour":"07:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.5507246450237606","hour":"07:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"1.0280373703653567","hour":"08:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.9523809608959016","hour":"08:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.9278350622998071","hour":"09:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.8032786865703395","hour":"09:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.979166679084301","hour":"10:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.6923077034426259","hour":"10:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.8023952135068928","hour":"11:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.7000000004967054","hour":"11:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.6153846207337502","hour":"12:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.49999999893563135","hour":"12:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.5384615474677348","hour":"13:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.4454545538533818","hour":"13:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.6842105400405432","hour":"14:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.7692307722874177","hour":"14:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.8148148155506746","hour":"15:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.6474820266095854","hour":"15:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.5915493029104152","hour":"16:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.6488549672920285","hour":"16:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.6756756611772485","hour":"17:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.7671232893042368","hour":"17:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.6969697123224085","hour":"18:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.6744186060373173","hour":"18:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.3956043969962623","hour":"19:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.4482758715748787","hour":"19:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.3913043607836184","hour":"20:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.6363636255264282","hour":"20:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.20000000298023224","hour":"21:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.1904761954432442","hour":"21:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.19117647519006448","hour":"22:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.14285714569545926","hour":"22:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.1904761954432442","hour":"23:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227810"},{"stop_time_cycle":"0.8518518496442724","hour":"06:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.5454545617103577","hour":"07:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"1.071428566319602","hour":"08:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.7936508059501648","hour":"08:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"1.137931028316761","hour":"09:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"1.1702127722983664","hour":"09:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"1.258064543047259","hour":"10:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"1.0588235469425427","hour":"10:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"1.0909091234207153","hour":"11:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.8181818127632141","hour":"12:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.6000000238418579","hour":"12:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.8999999761581421","hour":"13:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.8695652122082917","hour":"13:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.8999999761581421","hour":"14:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.8999999761581421","hour":"15:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.7741935445416358","hour":"16:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.8888889008098179","hour":"16:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.9000000059604645","hour":"18:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.6000000238418579","hour":"18:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.8000000092718337","hour":"19:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.7333333492279053","hour":"19:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_603227950"},{"stop_time_cycle":"0.10000000149011612","hour":"05:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.2083333395421505","hour":"05:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.8666666547457377","hour":"06:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.6647727342153137","hour":"06:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.8157894709392598","hour":"07:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.774193561525755","hour":"07:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"1.0676691765175725","hour":"08:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"1.0975609828786153","hour":"08:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"1.1500000357627869","hour":"09:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"1.3636363744735718","hour":"10:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"1.100000023841858","hour":"10:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.6666666666666666","hour":"11:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.7619047533898127","hour":"11:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.8999999761581421","hour":"12:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.7272727489471436","hour":"13:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"1.0476190078826177","hour":"14:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.8999999761581421","hour":"14:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.7272727489471436","hour":"15:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"0.699999988079071","hour":"16:30","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"},{"stop_time_cycle":"1.0909091234207153","hour":"18:00","logic_flow_id":"2017030116_i_63461831_2017030116_o_63349551"}]', true);
$key = 'stop_time_cycle';
$hours = json_decode('["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"]', true);
$flowsName = json_decode('{"2017030116_i_505297590_2017030116_o_603227810":"\u5357\u6389\u5934","2017030116_i_505297590_2017030116_o_603227950":"\u5357\u76f4","2017030116_i_505297590_2017030116_o_63349551":"\u5357\u53f3","2017030116_i_505297590_2017030116_o_63461830":"\u5357\u5de6","2017030116_i_63349550_2017030116_o_603227810":"\u4e1c\u5de6","2017030116_i_63349550_2017030116_o_603227950":"\u4e1c\u53f3","2017030116_i_63349550_2017030116_o_63349551":"\u4e1c\u6389\u5934","2017030116_i_63349550_2017030116_o_63461830":"\u4e1c\u76f4","2017030116_i_63461810_2017030116_o_603227810":"\u5317\u76f4","2017030116_i_63461810_2017030116_o_603227950":"\u5317\u6389\u5934","2017030116_i_63461810_2017030116_o_63349551":"\u5317\u5de6","2017030116_i_63461810_2017030116_o_63461830":"\u5317\u53f3","2017030116_i_63461831_2017030116_o_603227810":"\u897f\u53f3","2017030116_i_63461831_2017030116_o_603227950":"\u897f\u5de6","2017030116_i_63461831_2017030116_o_63349551":"\u897f\u76f4","2017030116_i_63461831_2017030116_o_63461830":"\u897f\u6389\u5934"}', true);
$junctionInfo = json_decode('{"junction":{"name":"\u7eac\u4e8c\u8def-\u7ecf\u4e09\u8def","lat":"36.66374","lng":"116.99647"},"flows":{"2017030116_i_505297590_2017030116_o_603227810":"\u5357\u6389\u5934","2017030116_i_505297590_2017030116_o_603227950":"\u5357\u76f4","2017030116_i_505297590_2017030116_o_63349551":"\u5357\u53f3","2017030116_i_505297590_2017030116_o_63461830":"\u5357\u5de6","2017030116_i_63349550_2017030116_o_603227810":"\u4e1c\u5de6","2017030116_i_63349550_2017030116_o_603227950":"\u4e1c\u53f3","2017030116_i_63349550_2017030116_o_63349551":"\u4e1c\u6389\u5934","2017030116_i_63349550_2017030116_o_63461830":"\u4e1c\u76f4","2017030116_i_63461810_2017030116_o_603227810":"\u5317\u76f4","2017030116_i_63461810_2017030116_o_603227950":"\u5317\u6389\u5934","2017030116_i_63461810_2017030116_o_63349551":"\u5317\u5de6","2017030116_i_63461810_2017030116_o_63461830":"\u5317\u53f3","2017030116_i_63461831_2017030116_o_603227810":"\u897f\u53f3","2017030116_i_63461831_2017030116_o_603227950":"\u897f\u5de6","2017030116_i_63461831_2017030116_o_63349551":"\u897f\u76f4","2017030116_i_63461831_2017030116_o_63461830":"\u897f\u6389\u5934"}}', true);

$dataByFlow = Collection::make($result)->groupBy(['logic_flow_id', 'hour'], function ($arr) use ($key) {
    return reset($arr)[$key] ?? '';
});

$dataByHour = Collection::make($result)->groupBy(['hour', 'logic_flow_id'], function ($arr) use ($key) {
    return reset($arr)[$key] ?? '';
});

//求出每个方向的全天均值中最大的方向 ID //如果有多个最大值，则取平均求最大
$maxFlowIds = $dataByHour->reduce(function ($carry, $item){
    return Collection::make($item)->keysOfMaxValue()->reduce(function (Collection $ca, $it) {
        $ca->increment($it); return $ca;
    }, $carry);
}, Collection::make([]))->keysOfMaxValue()->reduce(function (Collection $carry, $item) use ($dataByHour) {
    return $carry->set($item, $dataByHour->avg($item));
}, Collection::make([]))->keysOfMaxValue();

//找出均值最大的方向的最大值最长持续时间区域
$base_time_box = $maxFlowIds->reduce(function (Collection $carry, $id) use ($dataByFlow, $dataByHour) {
    $maxFlow = Collection::make($dataByFlow->get($id));
    $maxFlowFirstKey = $maxFlow->first(null, '');
    $maxArray = $nowArray = [
        'start_time' => $maxFlowFirstKey,
        'end_time' => $maxFlowFirstKey,
        'length' => 0,
    ];
    $maxFlow->each(function ($quota, $hour) use ($dataByHour, &$nowArray, &$maxArray) {
        $max = max($dataByHour->get($hour));
        if($quota >= $max && $quota > 0) {
            $nowArray['end_time'] = $hour;
            echo $hour, PHP_EOL;
            if($nowArray['start_time'] == '') $nowArray['start_time'] = $hour;
            $nowArray['length']++;
        } else {
            if($nowArray['length'] > $maxArray['length']) $maxArray = $nowArray;
            $nowArray = [ 'start_time' => '', 'end_time' => '', 'length' => 0, ];
        }
        dump($nowArray);
    });
    if($nowArray['length'] < $maxArray['length']) $nowArray = $maxArray;
    if($carry->isEmpty() || $carry->get('0.length', 0) == $nowArray['length']) {
        return $carry->set($id, $nowArray);
    } elseif($carry->get('0.length', 0) < $nowArray['length']) {
        return Collection::make([$id => $nowArray]);
    } else {
        return $carry;
    }
}, Collection::make([]));
die();
//如果某个时间点某个方向没有数据，则设为 null
$hours = Collection::make($hours);
$dataByFlow = $dataByFlow->map(function ($flow) use ($hours) {
    return $hours->reduce(function ($carry, $item) {
        $carry[$item] = $carry[$item] ?? null; return $carry;
    }, $flow);
});

$dataByFlow->each(function ($value, $ke) use (&$base, &$flow_info, &$maxFlowIds, $flowsName, $key) {
    $base[$ke] = [];
    foreach ($value as $k => $v) { $base[$ke][] = [$v === null ? null : $this->quotas[$key]['round']($v), $k]; }
    $flow_info[$ke] = [ 'name' => $flowsName[$ke] ?? '', 'highlight' => (int)($maxFlowIds->inArray($ke))];
});

$base_time_box->each(function ($v, $k) use (&$describes, &$summarys, $key, $junctionInfo) {
    $describes[] = $this->quotas[$key]['describe']([
        $junctionInfo['junction']['name'] ?? '',
        $junctionInfo['flows'][$k] ?? '',
        $v['start_time'],
        $v['end_time']]);
    $summarys[] = $this->quotas[$key]['summary']([
        $v['start_time'],
        $v['end_time'],
        $junctionInfo['flows'][$k] ?? '']);
});

$base_time_box = $base_time_box->all();
$describe_info = implode("\n", $describes);
$summary_info = implode("\n", $summarys);

return compact('base', 'flow_info', 'base_time_box', 'describe_info', 'summary_info');